# Тестовое задание
Создание таблицы автобусных остановок, находящихся в радиусе 1 км от ЖК

Итоговая таблица - `final_table.xlsx`

## Запуск

- Необходимо установить библиотеки из файла `requirements.txt` командой: **pip install -r requirements.txt**
- В конфигурационном файле `config.py` прописать данные для подключение к БД PostgreSQL 
- Запустить файл `main.py` командой: **python main.py**

## Принцип работы

  В проекте есть 2 excel таблицы: `apartments.xlsx` - c названиями и координатами ЖК, `stations.xlsx` - с названиями и координатами остановок.
  
`main.py` - программа запускающая скрипты для создания БД и создания таблицы

`db.py` - модуль, который создаёт БД и кладёт в неё данные из excel таблиц. Также в нём есть 2 функции для получения информации из БД в виде словарей

`script.py` - модуль, в котором создаётся таблица с остановки в радиусе 1 км для каждого ЖК. Остановки отсортированы в порядке удалённости.

`config.py` - конфигурационный файл для БД PostgreSQL

## Замечания 

- Для того, чтобы можно было создать колонку с координатами, использовалось дополнение PostGIS. Для добавления в PostgreSQL необходимо прописать следующую команду: **CREATE EXTENSION postgis;**

- Создание таблицы было оптимизировано. Вместо того, чтобы находить расстояние от ЖК до каждой остановки, отсекались неподходящие остановки, которые находились за пределами квадрата со сторонами 2.4 км (*на всякий случай*). Оптимизация уменьшила время работы функции `form_answer` в **150 раз** (10.7 с -> 0.07 c) 
